<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta
            http-equiv="X-UA-Compatible"
            content="IE=edge"
        >
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0"
        >
        <title>Document</title>
    </head>
    <body>
        <script>
            // angular 使用 history 路由跳转 hash
            
            // popState 事件早于 hashchang 事件 执行
            window.addEventListener('hashchange', () => {
                // window.location.hash = '/123'; 会触发调用
                // history.pushState({}, 'title', '#/123') 不会触发调用
                // 浏览器前进后退 hash 变化 会触发调用
                alert('addEventListener hashchange');
            });

            window.addEventListener('popstate', () => {
                // window.location.hash = '/123'; 会触发调用
                // history.pushState({}, 'title', '#/123') 不会触发调用
                // 浏览器前进后退 url 变化会触发调用
                alert('addEventListener popstate');
            });

            setTimeout(() => {
                // window.location.hash = '/123';
                history.pushState({}, 'title', '#/123')
            }, 2000);
        </script>
    </body>
</html>
